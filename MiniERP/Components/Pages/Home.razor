@page "/"
@using MiniERP.Database.Models
@using Microsoft.AspNetCore.Components.QuickGrid

<div class="container-main">
	<div class="home-title">
		<h1>HOME</h1>
	</div>
	<div class="grid-container">
		@foreach(User user in Users)
		{
			<div class="row-container">
					@if (user.Id != 0)
					{
					<div class="container-users">
						<a href="/login/@user.Id">
							<img src="@(user.ProfileImg is null ? "img/default.png"
														: $"data:image/png;base64,{Convert.ToBase64String(user.ProfileImg)}")" class="user-image" />
						</a>
						<div class="btn-edit-overlay">
							<a href="/register/@user.Id" >
								<i class="far fa-edit"></i>
							</a>
						</div>
					</div>
					<div class="user-name">
						<p>@user.Name</p>
					</div>
					}
					else
					{
					<div class="add-user container-users">
						<a href="/login/-1" >
							<i class="fas fa-plus-circle"></i>
							<p>Add New User</p>
						</a>
					</div>
					}
			</div>
		}
	</div>

</div>

@code {
	[CascadingParameter]
	public bool ShowReturnButton { get; set; }
	private List<User> Users = new List<User>();

	protected override async Task OnInitializedAsync()
	{
		List<User> usersList = await new MiniERP.Database.Services.Users.UserService().GetUsers();

		usersList.Add(new User
		{
			Id = 0
		});
		Users = usersList;

		ShowReturnButton = false;

	}

}